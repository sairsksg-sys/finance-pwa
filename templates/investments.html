<!DOCTYPE html>
<html>
<head>
<link rel="manifest" href="/static/manifest.json">

<script>
if ("serviceWorker" in navigator) {
  navigator.serviceWorker.register("/static/sw.js");
}
</script>
#<link rel="stylesheet" href="/static/styles.css">
<title>Add Investment</title>

<script>
function setCurrency(){
  const c=document.getElementById("country").value;
  document.getElementById("currency").value=c==="SG"?"SGD":"INR";
}
function toggleInstrument(){
  document.getElementById("instrument_other").style.display =
    document.getElementById("instrument").value==="Others"?"block":"none";
}
function calculateMaturity(){
  let p=parseFloat(document.getElementById("principal").value||0);
  let r=parseFloat(document.getElementById("interest").value||0);
  let d1=new Date(document.getElementById("invest_date").value);
  let d2=new Date(document.getElementById("maturity_date").value);
  if(!p||!r||!d2) return;
  let years=(d2-d1)/(1000*60*60*24*365);
  let m=p*Math.pow((1+r/100),years);
  document.getElementById("maturity_value").value=m.toFixed(2);
}
</script>
</head>
<body>

<div class="navbar">
  <a href="/" class="nav-home">üè† Home</a>
</div>

<div class="form-container">
<h2>Add Investment</h2>

<form method="POST">

<div class="form-group">
<label>Instrument Type</label>
<select name="instrument" id="instrument" onchange="toggleInstrument()" required>
<option>Bonds</option>
<option>Equities</option>
<option>Fixed Deposits</option>
<option>Mutual Funds</option>
<option>Real Estate</option>
<option>Gold</option>
<option>Silver</option>
<option>Others</option>
</select>
</div>

<div class="form-group" id="instrument_other" style="display:none;">
<label>Specify Instrument</label>
<input name="instrument_other">
</div>

<div class="form-group">
<label>Instrument Title</label>
<input name="title" required>
</div>

<div class="form-group">
<label>Description</label>
<textarea name="description"></textarea>
</div>

<div class="form-group">
<label>Country</label>
<select name="country" id="country" onchange="setCurrency()" required>
<option value="">Select</option>
<option value="SG">Singapore</option>
<option value="IND">India</option>
</select>
</div>

<div class="form-group">
<label>Currency</label>
<input name="currency" id="currency" readonly>
</div>

<div class="form-group">
<label>Investment Date</label>
<input type="date" name="invest_date" id="invest_date" required>
</div>

<div class="form-group">
<label>Maturity Date (Optional)</label>
<input type="date" name="maturity_date" id="maturity_date" onchange="calculateMaturity()">
</div>

<div class="form-group">
<label>Principal Amount</label>
<input type="number" step="0.01" id="principal" name="principal" required onchange="calculateMaturity()">
</div>

<div class="form-group">
<label>Interest Rate (%)</label>
<input type="number" step="0.01" id="interest" name="interest" onchange="calculateMaturity()">
</div>

<div class="form-group">
<label>Maturity Value (Auto Calculated)</label>
<input name="maturity_value" id="maturity_value" readonly>
</div>

<button>Add Investment</button>
</form>
</div>

<h3>Saved Investments</h3>

<table>
<tr>
  <th>Instrument</th><th>Country</th>
  <th>Invest Date</th><th>Maturity</th>
  <th>Value</th>
</tr>

{% for i in investments %}
<tr>
  <td>{{ i.instrument }}</td>
  <td>{{ i.country }}</td>
  <td>{{ i.invest_date }}</td>
  <td>{{ i.maturity_date }}</td>
  <td>{{ i.currency }} {{ i.maturity_value }}</td>
</tr>
{% endfor %}
</table>

</body>
</html>
