<!DOCTYPE html>
<html>
<head>
<link rel="manifest" href="/static/manifest.json">

<script>
if ("serviceWorker" in navigator) {
  navigator.serviceWorker.register("/static/sw.js");
}
</script>

#<link rel="stylesheet" href="/static/styles.css">
<title>Payment Scheduler</title>

<script>
function setCurrency(){
  const c=document.getElementById("country").value;
  document.getElementById("currency").value=c==="SG"?"SGD":"INR";
}
function toggleOther(){
  document.getElementById("mode_other").style.display =
    document.getElementById("mode").value==="Others"?"block":"none";
}
</script>
</head>
<body>

<div class="navbar">
  <a href="/" class="nav-home">üè† Home</a>
</div>

<div class="form-container">
<h2>Payment Scheduler</h2>

<form method="POST">

<div class="form-group">
<label>Payment Title</label>
<input name="title" required>
</div>

<div class="form-group">
<label>Description</label>
<textarea name="description"></textarea>
</div>

<div class="form-group">
<label>Country</label>
<select name="country" id="country" onchange="setCurrency()" required>
<option value="">Select</option>
<option value="SG">Singapore</option>
<option value="IND">India</option>
</select>
</div>

<div class="form-group">
<label>Currency</label>
<input name="currency" id="currency" readonly>
</div>

<div class="form-group">
<label>Repeat Interval</label>
<select name="interval">
<option>Daily</option>
<option>Monthly</option>
<option>Quarterly</option>
<option>Half Yearly</option>
<option>Annual</option>
</select>
</div>

<div class="form-group">
<label>Due Date</label>
<input type="date" name="due_date" required>
</div>

<div class="form-group">
<label>Payment Mode</label>
<select name="mode" id="mode" onchange="toggleOther()">
<option>Cash</option>
<option>Card</option>
<option>GPay</option>
<option>Paynow</option>
<option>Others</option>
</select>
</div>

<div class="form-group" id="mode_other" style="display:none;">
<label>Specify Other Mode</label>
<input name="mode_other">
</div>

<div class="form-group">
<label>Reminder</label>
<input type="number" name="reminder_value" placeholder="Number">
<select name="reminder_unit">
<option>Days</option>
<option>Hours</option>
</select>
</div>

<div class="form-group">
<label>Email for Reminder</label>
<input type="email" name="email">
</div>

<button>Add Payment</button>
</form>
</div>

<h3>Scheduled Payments</h3>

<table>
<tr>
  <th>Title</th><th>Due Date</th>
  <th>Country</th><th>Status</th>
</tr>

{% for p in payments %}
<tr>
  <td>{{ p.title }}</td>
  <td>{{ p.due_date }}</td>
  <td>{{ p.country }}</td>
  <td>
    {% if p.due_date < today %}
      <span style="color:red">Overdue</span>
    {% else %}
      Upcoming
    {% endif %}
  </td>
</tr>
{% endfor %}
</table>


</body>
</html>
